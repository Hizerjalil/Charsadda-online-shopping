<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Charsadda Online Shopping â€” Shop</title>

  <!-- Bootstrap + Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background: #f9fafb;
      transition: background-color .5s, color .5s;
      font-family: 'Poppins', sans-serif;
    }

    header {
      backdrop-filter: blur(8px);
      background: linear-gradient(90deg,#2563eb,#06b6d4);
      border-bottom: 2px solid rgba(255,255,255,0.1);
    }

    .dark-mode {
      background-color: #0f172a !important;
      color: #f1f5f9 !important;
    }
    .dark-mode header {
      background: rgba(15,23,42,0.95);
    }

    /* Sidebar styling */
    .filter-sidebar {
      background: #fff;
      border-radius: 1rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      padding: 1.5rem;
      position: sticky;
      top: 100px;
      height: fit-content;
    }
    .dark-mode .filter-sidebar {
      background: #1e293b;
      color: #e2e8f0;
    }

    .filter-sidebar h5 {
      font-weight: 600;
      color: #2563eb;
      margin-bottom: 1rem;
    }

    /* Product Cards */
    .product-card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      transition: all .3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      text-align: center;
    }
    .product-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.1);
    }
    .product-card img {
      height: 200px;
      object-fit: contain;
      transition: transform .3s;
    }
    .product-card:hover img {
      transform: scale(1.05);
    }

    /* Buttons */
    .btn-primary {
      background: linear-gradient(90deg, #3b82f6, #06b6d4);
      border: none;
    }
    .btn-primary:hover {
      background: linear-gradient(90deg, #2563eb, #0891b2);
      transform: scale(1.05);
    }

    /* Toast */
    #toastContainer .toast-card {
      background: #22c55e;
      color: white;
      padding: .75rem 1rem;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      margin-bottom: .5rem;
      animation: fadeIn .3s ease;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(-10px);}
      to {opacity: 1; transform: translateY(0);}
    }

    footer {
      background: linear-gradient(135deg, #1e3a8a, #0ea5e9);
      color: white;
      padding: 40px 0;
    }

    footer a { color: #c7d2fe; text-decoration: none; }
    footer a:hover { color: white; }

    .star-rating i {
      color: #facc15;
    }
  </style>
</head>

<body id="body">

  <!-- Header -->
  <header class="text-white py-3 shadow-sm sticky-top z-50">
    <div class="container d-flex justify-content-between align-items-center">
      <a href="index.html" class="d-flex align-items-center gap-3 text-white text-decoration-none">
        <img src="assets/logo/charsadda-logo.svg" alt="logo" width="60" height="60">
        <div>
          <h1 class="h5 mb-0 fw-bold">Charsadda Online Shopping</h1>
          <small class="text-white-50">Local ideas. Global reach.</small>
        </div>
      </a>
      <div class="d-flex align-items-center gap-3">
        <a href="index.html" class="btn btn-sm btn-outline-light d-none d-md-inline">Home</a>
        <a href="about.html" class="btn btn-sm btn-outline-light d-none d-md-inline">About</a>
        <a href="contact.html" class="btn btn-sm btn-outline-light d-none d-md-inline">Contact</a>
        <button id="themeToggle" class="btn btn-outline-light btn-sm">ðŸŒ™</button>
        <a href="cart.html" class="btn btn-light btn-sm position-relative">
          <i class="bi bi-cart"></i> <span id="cartCount" class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span>
        </a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container my-5">
    <div class="row g-4">
      <!-- Left Sidebar -->
      <aside class="col-md-3">
        <div class="filter-sidebar">
          <h5>ðŸ§­ Filters</h5>

          <div class="mb-3">
            <label class="form-label fw-semibold">Search</label>
            <input id="searchInput" class="form-control form-control-sm" placeholder="Search products...">
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Category</label>
            <select id="categoryFilter" class="form-select form-select-sm">
              <option value="all">All categories</option>
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Max Price: $<span id="priceLabel">1000</span></label>
            <input id="priceRange" type="range" min="0" max="1000" value="1000" class="form-range">
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Condition</label>
            <select class="form-select form-select-sm">
              <option>New</option>
              <option>Used</option>
              <option>Refurbished</option>
            </select>
          </div>

          <div>
            <label class="form-label fw-semibold">Brand</label>
            <div class="d-flex flex-column gap-1">
              <label><input type="checkbox"> Apple</label>
              <label><input type="checkbox"> Samsung</label>
              <label><input type="checkbox"> Nike</label>
              <label><input type="checkbox"> Sony</label>
            </div>
          </div>
        </div>
      </aside>

      <!-- Right Product Area -->
      <section class="col-md-9">
        <div id="spinner" class="text-center my-5">
          <div class="spinner-border text-primary" role="status"></div>
          <div class="mt-2 text-muted">Loading products...</div>
        </div>

        <div id="products" class="row g-4"></div>

        <div class="text-center mt-5">
          <a href="cart.html" class="btn btn-success btn-lg px-5 py-3 shadow"><i class="bi bi-credit-card"></i> Checkout</a>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="text-center">
    <div class="container">
      <div class="row gy-4">
        <div class="col-md-4">
          <h5 class="fw-bold mb-3">About Us</h5>
          <p>Charsadda Online Shopping brings you local creativity with global reach. Trusted by thousands of happy customers.</p>
        </div>
        <div class="col-md-4">
          <h5 class="fw-bold mb-3">Quick Links</h5>
          <ul class="list-unstyled">
            <li><a href="index.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="col-md-4">
          <h5 class="fw-bold mb-3">Contact</h5>
          <p><i class="bi bi-geo-alt"></i> Charsadda, Pakistan</p>
          <p><i class="bi bi-envelope"></i> support@charsadda.shop</p>
          <p><i class="bi bi-phone"></i> +92 333 0000000</p>
        </div>
      </div>
      <hr class="border-light my-4">
      <p class="small mb-0">Â© <span id="year"></span> Charsadda Online Shopping â€” All Rights Reserved</p>
    </div>
  </footer>

  <!-- Toast container -->
  <div id="toastContainer" style="position:fixed;top:1rem;right:1rem;z-index:11000;"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const API = "https://fakestoreapi.com/products";
    const grid = document.getElementById("products");
    const spinner = document.getElementById("spinner");
    const cartCount = document.getElementById("cartCount");
    const themeToggle = document.getElementById("themeToggle");
    document.getElementById("year").textContent = new Date().getFullYear();

    themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
    });

    async function loadProducts() {
      const res = await fetch(API);
      const data = await res.json();
      spinner.style.display = "none";
      renderProducts(data);
    }

    function renderStars(rate) {
      const stars = Math.round(rate);
      return `<div class='star-rating mb-2'>${[...Array(5)].map((_, i) =>
        `<i class="bi ${i < stars ? 'bi-star-fill' : 'bi-star'}"></i>`
      ).join('')}</div>`;
    }

    function renderProducts(products) {
      grid.innerHTML = products.map(p => `
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="product-card p-3 h-100 d-flex flex-column justify-content-between">
            <img src="${p.image}" alt="${p.title}" class="img-fluid mb-3">
            <h6 class="fw-semibold text-truncate">${p.title}</h6>
            ${renderStars(p.rating?.rate || 4)}
            <p class="text-primary fw-bold mb-2">$${p.price}</p>
            <div class="d-flex gap-2">
              <button class="btn btn-primary btn-sm flex-fill addBtn" data-id="${p.id}"><i class="bi bi-cart-plus"></i> Add</button>
              <button class="btn btn-outline-dark btn-sm flex-fill"><i class="bi bi-eye"></i> View</button>
            </div>
          </div>
        </div>`).join('');

      document.querySelectorAll(".addBtn").forEach(btn =>
        btn.addEventListener("click", e => addToCart(Number(e.target.closest("button").dataset.id), products))
      );
    }

    function addToCart(id, products) {
      const cart = JSON.parse(localStorage.getItem("cart_v1") || "[]");
      const product = products.find(p => p.id === id);
      const existing = cart.find(item => item.id === id);

      if (existing) existing.qty++;
      else cart.push({ ...product, qty: 1 });

      localStorage.setItem("cart_v1", JSON.stringify(cart));
      updateCartCount();
      showToast(`${product.title.substring(0,25)} added to cart ðŸ›’`);
    }

    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem("cart_v1") || "[]");
      cartCount.textContent = cart.reduce((sum, i) => sum + i.qty, 0);
    }

    function showToast(msg) {
      const c = document.getElementById("toastContainer");
      const el = document.createElement("div");
      el.className = "toast-card";
      el.innerHTML = `<i class="bi bi-check-circle me-2"></i>${msg}`;
      c.appendChild(el);
      setTimeout(() => { el.style.opacity = "0"; setTimeout(() => el.remove(), 300); }, 2000);
    }

    loadProducts();
    updateCartCount();
  </script>
</body>
</html>
